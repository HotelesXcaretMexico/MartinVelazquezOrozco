(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{230:function(e,t,n){"use strict";var r=n(232),o=n.n(r);t.a=function(e){return o()(e,4)}},236:function(e,t,n){"use strict";var r={name:"CompanyEntity",props:{logo:{type:String,required:!0},name:{type:String,required:!0},showname:{type:Boolean,default:!0}},data:function(){return{logoLoaded:!1}}},o=n(22),c=n(38),l=n.n(c),d=n(224),m=n(225),component=Object(o.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VFlex",{attrs:{"my-3":""}},[n("VLayout",{attrs:{"align-start":"","justify-center":"",row:"","fill-height":""}},[n("VFlex",{staticClass:"text-xs-center"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.logoLoaded,expression:"logoLoaded"}]},[n("img",{attrs:{src:e.logo,height:"100"},on:{load:function(t){e.logoLoaded=!0}}})]),e._v(" "),e.showname?n("p",{staticClass:"title"},[e._v("\n        "+e._s(e.name)+"\n      ")]):e._e()])],1)],1)},[],!1,null,null,null);t.a=component.exports;l()(component,{VFlex:d.a,VLayout:m.a})},241:function(e,t,n){e.exports=n.p+"img/00dd5f9.svg"},242:function(e,t,n){var content=n(307);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(21).default)("7b4f02be",content,!0,{sourceMap:!1})},247:function(e,t,n){var content=n(319);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(21).default)("334b04fa",content,!0,{sourceMap:!1})},248:function(e,t,n){e.exports=n.p+"img/c6a48f6.svg"},249:function(e,t,n){var content=n(338);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(21).default)("f498995c",content,!0,{sourceMap:!1})},257:function(e,t,n){"use strict";n(16);var r=n(18),o=(n(72),n(15)),c=(n(231),n(41),n(42),n(6),n(31),n(55),n(58),n(30),n(44),n(286)),l=n.n(c),d=n(89),m=n(90),h={props:{isOpen:{type:Boolean}},data:function(){return{persistent:!0}},methods:{sendEvent:function(){this.$emit("closeModal")}}},v=(n(306),n(22)),f=n(38),C=n.n(f),y=n(259),x=n(378),w=n(262),k=n(385),A=n(224),_=n(283),D=n(225),V=n(375),component=Object(v.a)(h,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VDialog",{attrs:{persistent:e.persistent,"max-width":"600px"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[r("VCard",{staticClass:"pl-3"},[r("VCardTitle",[r("h1",{staticClass:"modalTitle"},[e._v("\n        Tarjetas de crédito participantes\n      ")]),e._v(" "),r("VSpacer"),e._v(" "),r("VIcon",{staticClass:"text-right",on:{click:e.sendEvent}},[e._v("\n        close\n      ")])],1),e._v(" "),r("VCardText",[r("VLayout",{},[r("VFlex",{attrs:{"mt-2":""}},[r("h2",{staticClass:"subtitleModal pl-2"},[e._v("\n            3, 6, 9, 12, 18 y 24 pagos mensuales\n          ")])])],1),e._v(" "),r("VLayout",{},[r("VFlex",{attrs:{"mt-2":""}},[r("img",{attrs:{src:n(287),alt:"BBVA",height:"55"}})]),e._v(" "),r("VFlex",{attrs:{"mt-2":""}},[r("img",{attrs:{src:n(288),alt:"AMEX",height:"55"}})]),e._v(" "),r("VFlex",{attrs:{"mt-2":""}},[r("img",{attrs:{src:n(289),alt:"BANAMEX",height:"55"}})])],1),e._v(" "),r("VLayout",{},[r("VFlex",{attrs:{"mt-2":""}},[r("h2",{staticClass:"subtitleModal pl-2"},[e._v("\n            3, 6, 9, 12 y 18 pagos mensuales\n          ")])])],1),e._v(" "),r("VLayout",[r("VFlex",[r("img",{attrs:{src:n(290),alt:"HSBC",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(291),alt:"SANTANDER",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(292),alt:"BANREGIO",height:"40"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(293),alt:"SCOTIABANK",height:"55"}})])],1),e._v(" "),r("VLayout",{attrs:{row:"","fill-height":""}},[r("VFlex",[r("img",{attrs:{src:n(294),alt:"BANORTE",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(295),alt:"AFIRME",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(296),alt:"BANCO FAMSA",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(297),alt:"BANBAJIO",height:"55"}})])],1),e._v(" "),r("VLayout",{attrs:{row:"","fill-height":""}},[r("VFlex",[r("img",{attrs:{src:n(298),alt:"INBURSA",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(299),alt:"INVEX",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(300),alt:"LIVERPOOL",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(301),alt:"IXE",height:"55"}})])],1),e._v(" "),r("VLayout",{attrs:{row:"","fill-height":""}},[r("VFlex",[r("img",{attrs:{src:n(302),alt:"MIFEL",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(303),alt:"BANJERCITO",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(304),alt:"KONFIO",height:"55"}})]),e._v(" "),r("VFlex",[r("img",{attrs:{src:n(305),alt:"FALABELLA",height:"55"}})])],1),e._v(" "),r("p",{staticClass:"grey--text"},[e._v("\n        El monto mínimo para pagos mensuales es de $300\n      ")])],1)],1)],1)},[],!1,null,"6f90fd5d",null),E=component.exports;C()(component,{VCard:y.a,VCardText:x.a,VCardTitle:w.a,VDialog:k.a,VFlex:A.a,VIcon:_.a,VLayout:D.a,VSpacer:V.a});var I={props:{checkout:{type:Object,default:function(){return{}}},color:{type:String,required:!0}}},T=(n(318),n(269)),F=n(271),N=n(373),P=n(273),L=Object(v.a)(I,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.checkout.remote_payment?n("div",[n("div",{staticClass:"box"},[n("div",[n("p",{staticClass:"text-xs-center text-md-left"},[e._v("\n        "+e._s(e.checkout.externalId)+"\n      ")])])]),e._v(" "),n("p",{staticClass:"rp-subheader mb-1 mt-4 text-xs-center text-md-left"},[e._v("\n    Mensaje:\n  ")]),e._v(" "),n("p",{staticClass:"mb-4 text-xs-center text-md-left"},[e._v("\n    "+e._s(e.checkout.description)+"\n  ")]),e._v(" "),n("p",{staticClass:"rp-subheader remove-spacing text-xs-center text-md-left"},[e._v("\n    Total a enviar (MXN)\n  ")]),e._v(" "),n("p",{staticClass:"price-sign"},[n("span",{staticClass:"text-grey text-xs-center text-md-left"},[e._v("$")]),e._v(" "),n("span",{staticClass:"price-text text-xs-center text-md-left"},[e._v(e._s(e.checkout.total))])])]):n("div",[n("p",{staticClass:"title"},[n("VIcon",{staticClass:"mr-3",attrs:{color:e.color}},[e._v("\n      shopping_cart\n    ")]),e._v("\n    Compra #"+e._s(e.checkout.externalId)+"\n  ")],1),e._v(" "),n("VList",{staticClass:"items-container-scroll py-3",attrs:{subheader:"",dense:""}},[n("VSubheader",[e._v("Artículos")]),e._v(" "),e._l(e.checkout.items,function(t,r){return n("VListTile",{key:r},[n("VListTileContent",[n("VListTileTitle",[e._v(" "+e._s(t))])],1)],1)})],2),e._v(" "),n("p",{staticClass:"subheading mb-1 mt-4 grey--text text-xs-center"},[e._v("\n    Total\n  ")]),e._v(" "),n("p",{staticClass:"title text-xs-center"},[e._v("\n    "+e._s(e._f("currency")(e.checkout.total))+"\n  ")])],1)},[],!1,null,null,null),R=L.exports;C()(L,{VIcon:_.a,VList:T.a,VListTile:F.a,VListTileContent:N.a,VListTileTitle:N.b,VSubheader:P.a});var O={props:{isOpen:{type:Boolean},otpConf:{type:Object,default:function(){}},brands:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{persistent:!0,showAlternativeChannels:!1,currentCode:"",errorReason:""}},mounted:function(){var e=this,t=this;setTimeout(function(){var n=document.querySelector("src-otp-channel-selection");n.identityValidationChannels=e.otpConf.supportedValidationChannels||[];var r=document.querySelector("src-otp-input");r.addEventListener("close",function(e){t.$emit("closeModal")}),n.addEventListener("close",function(e){t.$emit("closeModal")}),r.addEventListener("continue",function(t){t.detail;e.errorReason="",window.c2pInstance.validate({value:e.currentCode}).then(function(t){e.$emit("otpValue",t),e.currentCode="",e.$emit("closeModal")}).catch(function(t){t.reason&&"ACCT_INACCESSIBLE"===t.reason?e.errorReason="RETRIES_EXCEEDED":e.errorReason="CODE_INVALID"})}),r.addEventListener("otpChanged",function(t){var n=t.detail;null!==n&&(e.currentCode=n)}),r.addEventListener("alternateRequested",function(t){e.showAlternativeChannels=!0}),n.addEventListener("continue",function(e){var n=e.detail;"GUEST"==n.identityType?t.$emit("closeModal"):(t.setNewOtp(n),t.showAlternativeChannels=!1)})},500)},methods:{sendEvent:function(){this.$emit("closeModal")},setNewOtp:function(e){this.$emit("changeOtp",e)}}},B=Object(v.a)(O,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VDialog",{attrs:{persistent:e.persistent,"max-width":"350px"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[n("no-ssr",[n("src-otp-input",{directives:[{name:"show",rawName:"v-show",value:e.otpConf&&!e.showAlternativeChannels,expression:"otpConf && !showAlternativeChannels"}],attrs:{id:"src-otp-input",locale:"es_MX","card-brands":e.brands,"display-cancel-option":"true","error-reason":e.errorReason,"masked-identity-value":e.otpConf.maskedValidationChannel,"network-id":e.otpConf.network,type:"","display-header":"true"}}),e._v(" "),n("src-otp-channel-selection",{directives:[{name:"show",rawName:"v-show",value:e.showAlternativeChannels,expression:"showAlternativeChannels"}],attrs:{id:"src-otp-channel-selection",locale:"es_MX","card-brands":e.brands,"display-cancel-option":"true",type:"","display-header":"true"}})],1)],1)},[],!1,null,"ac380d9a",null),M=B.exports;C()(B,{VDialog:k.a});var S=n(326),U=n.n(S),j=(n(327),{components:{Loading:U.a},props:{isLoading:{type:Boolean}},data:function(){return{fullPage:!0,opacity:.6,color:"#019cde"}},methods:{}}),J=Object(v.a)(j,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vld-parent"},[t("Loading",{attrs:{active:this.isLoading,"can-cancel":!1,"is-full-page":this.fullPage,color:this.color,opacity:this.opacity}})],1)},[],!1,null,null,null).exports,W={props:{brands:{type:Array,default:function(){return["mastercsard","visa"]}}},data:function(){return{defaultheight:30}},computed:{currentBrands:function(){var e=["mastercard","visa","amex"];return this.brands.filter(function(t){return e.includes(t)})}}},H=Object(v.a)(W,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("img",{attrs:{src:n(241),height:e.defaultheight,alt:"clicktopay"}}),e._v(" "),r("img",{attrs:{src:n(274),height:e.defaultheight,alt:"pipe"}}),e._v(" "),e._l(e.currentBrands,function(t){return r("img",{key:t,attrs:{height:e.defaultheight,src:n(329)("./"+t+".svg"),alt:t}})})],2)},[],!1,null,null,null).exports,Y=n(335),$=n(336),Z=function(){function e(t){Object(Y.a)(this,e),this.srcId=t}return Object($.a)(e,[{key:"getInstance",value:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Click2Pay,(n=this.getDefaultConf()).srcDpaId=this.srcId,e.next=5,t.init(n);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getDefaultConf",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NONE";return{srcDpaId:"",cardBrands:t,dpaTransactionOptions:{transactionAmount:{transactionAmount:parseFloat(e),transactionCurrencyCode:"MXN"},dpaLocale:"es_MX",consumerEmailAddressRequested:!0,consumerPhoneNumberRequested:!0,dpaAcceptedBillingCountries:[],dpaAcceptedShippingCountries:[],dpaBillingPreference:"NONE",paymentOptions:[{dynamicDataType:n}]},dpaData:{dpaPresentationName:"Billpocket",dpaName:"POCKET DE LATINOAMERICA S.A.P.I. de C.V."}}}},{key:"getFakeChannelsForOTP",value:function(){return{maskedValidationChannel:"+91(***) ***-*460",supportedValidationChannels:[{identityProvider:"SRC",maskedValidationChannel:"j*****e@moofwd.com",identityType:"EMAIL",validationChannelId:"EMAIL"},{identityProvider:"SRC",maskedValidationChannel:"+91(***) ***-*460",identityType:"SMS",validationChannelId:"SMS"}],network:"mastercard"}}},{key:"getFakeOtpValidation",value:function(){return[{srcDigitalCardId:"8d070e67-8503-4260-8f7f-ed574e36d9c6",srcPaymentCardId:null,panBin:"520473",panLastFour:"8931",tokenLastFour:"5206",digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"MasterCard Test Bank",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/d5397362-33d1-468b-81e6-b5eeb5693972.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"05",panExpirationYear:"2024",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-08-26T09:33:50.189Z",dateOfCardLastUsed:"2021-08-26T13:42:40.576Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:null,line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"07097",addressId:"c0e11e29-5fa6-416c-9dbb-3c4b9128518b"}},{srcDigitalCardId:"361a8d27-0b74-413d-a318-db5dc568e908",srcPaymentCardId:null,panBin:"520473",panLastFour:"4601",tokenLastFour:"4750",digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"MasterCard Test Bank",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/bf15485f-83ee-4dee-a38e-a5e67b373006.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"02",panExpirationYear:"2023",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-08-16T08:29:34.069Z",dateOfCardLastUsed:"2021-08-26T13:05:09.217Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:"N** J*****",line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"07096",addressId:"deffff7f-6f9e-4b66-b42a-01a81c0aa35b"}},{srcDigitalCardId:"e79cc8fe-7fa9-4a44-8b87-2be58f317e98",srcPaymentCardId:null,panBin:"518600",panLastFour:"9726",tokenLastFour:null,digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"Mastercard",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/HIGH-MASK-3x.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"12",panExpirationYear:"2024",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-08-23T10:38:36.648Z",dateOfCardLastUsed:"2021-08-25T12:15:33.917Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:null,line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"40086",addressId:"d3d8918a-2990-4355-8b20-d8a9a02e696b"}},{srcDigitalCardId:"c29b8fa0-0b25-4c24-8d91-3d3495eb2b43",srcPaymentCardId:null,panBin:"518600",panLastFour:"9726",tokenLastFour:null,digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"Mastercard",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/HIGH-MASK-3x.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"05",panExpirationYear:"2025",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-08-24T09:21:56.072Z",dateOfCardLastUsed:"2021-08-25T12:08:52.904Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:null,line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"07001",addressId:"d7b90cbf-b6fb-47d4-a1a9-9767859901f7"}},{srcDigitalCardId:"9e718420-ce93-41b8-9413-e8270d0ff986",srcPaymentCardId:null,panBin:"555555",panLastFour:"4444",tokenLastFour:null,digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"Mastercard",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/HIGH-MASK-3x.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"02",panExpirationYear:"2023",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-07-15T16:32:24.883Z",dateOfCardLastUsed:"2021-08-16T07:42:05.485Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:"N** J*****",line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"07008",addressId:"99310422-7a5c-4527-b5b3-263128354564"}}]}},{key:"getFakeCards",value:function(){return[{srcDigitalCardId:"8d070e67-8503-4260-8f7f-ed574e36d9c6",srcPaymentCardId:null,panBin:"520473",panLastFour:"8931",tokenLastFour:"5206",digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"MasterCard Test Bank",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/d5397362-33d1-468b-81e6-b5eeb5693972.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"05",panExpirationYear:"2024",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-08-26T09:33:50.189Z",dateOfCardLastUsed:"2021-08-26T13:42:40.576Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:null,line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"07097",addressId:"c0e11e29-5fa6-416c-9dbb-3c4b9128518b"}},{srcDigitalCardId:"361a8d27-0b74-413d-a318-db5dc568e908",srcPaymentCardId:null,panBin:"520473",panLastFour:"4601",tokenLastFour:"4750",digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"MasterCard Test Bank",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/bf15485f-83ee-4dee-a38e-a5e67b373006.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"02",panExpirationYear:"2023",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-08-16T08:29:34.069Z",dateOfCardLastUsed:"2021-08-26T13:05:09.217Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:"N** J*****",line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"07096",addressId:"deffff7f-6f9e-4b66-b42a-01a81c0aa35b"}},{srcDigitalCardId:"e79cc8fe-7fa9-4a44-8b87-2be58f317e98",srcPaymentCardId:null,panBin:"518600",panLastFour:"9726",tokenLastFour:null,digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"Mastercard",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/HIGH-MASK-3x.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"12",panExpirationYear:"2024",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-08-23T10:38:36.648Z",dateOfCardLastUsed:"2021-08-25T12:15:33.917Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:null,line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"40086",addressId:"d3d8918a-2990-4355-8b20-d8a9a02e696b"}},{srcDigitalCardId:"c29b8fa0-0b25-4c24-8d91-3d3495eb2b43",srcPaymentCardId:null,panBin:"518600",panLastFour:"9726",tokenLastFour:null,digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"Mastercard",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/HIGH-MASK-3x.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"05",panExpirationYear:"2025",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-08-24T09:21:56.072Z",dateOfCardLastUsed:"2021-08-25T12:08:52.904Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:null,line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"07001",addressId:"d7b90cbf-b6fb-47d4-a1a9-9767859901f7"}},{srcDigitalCardId:"9e718420-ce93-41b8-9413-e8270d0ff986",srcPaymentCardId:null,panBin:"555555",panLastFour:"4444",tokenLastFour:null,digitalCardData:{status:"ACTIVE",presentationName:"",descriptorName:"Mastercard",artUri:"https://sbx.assets.mastercard.com/card-art/combined-image-asset/HIGH-MASK-3x.png",artHeight:null,artWidth:null,pendingEvents:null,coBrandedName:null,isCoBranded:!1},digitalCardFeatures:[],panExpirationMonth:"02",panExpirationYear:"2023",digitalCardRelatedData:null,countryCode:"US",dcf:{type:"BROWSER",uri:"https://sandbox.src.mastercard.com/pay/",logoUri:"http://mastercard.com/",name:"mastercard"},dateOfCardCreated:"2021-07-15T16:32:24.883Z",dateOfCardLastUsed:"2021-08-16T07:42:05.485Z",paymentCardDescriptor:"mastercard",tokenBinRange:null,maskedBillingAddress:{name:"Jo** **e",line1:"N** J*****",line2:"N** J*****",line3:null,city:"New Jersey",state:"NJ",countryCode:"US",zip:"07008",addressId:"99310422-7a5c-4527-b5b3-263128354564"}}]}},{key:"getFakeCheckout",value:function(){return{checkoutActionCode:"ERROR",headers:{"merchant-transaction-id":"0a4e0d3.34f4a04b.894125b16ddd1f1b3a58273d63a0894179ac3535","x-src-cx-flow-id":"34f4a04b.5ab95e32-30f7-483f-846f-a08230a6d2ed.1618397078"},idToken:"eyJraWQiOiIxNTExNjQtc3JjLWlkZW50aXR5LXZlcmlmaWNhdGlvbiIsInR5cCI6IkpXVCtleHQuaWRfdG9rZW4iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI4YWY3YTM4OC1lMzcxLTRlOGEtYWUzYS1jNTcxYTI1NGRmN2EiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImFtciI6WyJzbXNfb3RwIl0sImlzcyI6Imh0dHBzOlwvXC9tYXN0ZXJjYXJkLmNvbSIsInNyY19lbWFpbF9tYXNrIjoiaioqKioqYUBtYWlsaW5hdG9yLmNvbSIsInBob25lX251bWJlcl92ZXJpZmllZCI6dHJ1ZSwic3JjX3Bob25lX251bWJlcl9tYXNrIjoiKCoqKikgKioqLSoyMzQiLCJhdWQiOlsiaHR0cHM6XC9cL21hc3RlcmNhcmQuY29tIiwiaHR0cHM6XC9cL3d3dy52aXNhLmNvbSIsImh0dHBzOlwvXC9hbWVyaWNhbmV4cHJlc3MuY29tIiwiaHR0cHM6XC9cL21hc3RlcnBhc3N0ZXN0c3RvcmUuY29tIl0sImF1dGhfdGltZSI6MTYxODM5NjE2OCwicGhvbmVfbnVtYmVyIjoicEM2S3hjbEhsVnN4a1I1NHJ0T1dlajJXNEpYa1wvQUhvcGUzQzRBdTNrSUU9IiwiZXhwIjoxNjE4Mzk3MDY4LCJpYXQiOjE2MTgzOTYxNjgsImp0aSI6IjlhMDg5OTY5LTZhYjctNDYzMS04ZGM1LTM5YjE4YWNmYmVhMSIsImVtYWlsIjoiXC9qb2dnNUZBM21JYkxkanltMnRaTEJlRTZiZU5Pd0VQdWFWb0lcL3J1cWhJPSJ9.iO6mLE2Tl8HKN2A2-ayMN7NcTbTC2G11ReezU9huN_HmS9A3ynO06UnG-O7jfjZUktCxj42jTHQoYAJJ3tjHCpA11zgwGx37vDbcJsQB1peLvy-aQDQDQcWulUZCNmp9EepO_K6k0esLisCyyS-SvA1wttE4u7S2FPycwrOIZKY6-75aQLB1904EW-oxoc0PKq-XJe6KPylhrGiqyRbxlaR3_OAfkEzKG5b2_5-HLodgYbbZm2B4z9eKMKESv58uHh3J0m63OYbu2YnonkjU-mBhxIvoDX6MkMa1cCLErnhu1Ge3BEIrwu61HvT6j9ja-sLRXcbsx0O28e_1bfJGRA"}}}]),e}(),z=["mastercard","visa","amex"],X={data:function(){return{}},methods:{initializeClick2Pay:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(t){var n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:[],e.prev=1,n=new Z(t),e.abrupt("return",n.getInstance());case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",null);case 9:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}(),getCards:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:[],e.prev=1,r=new Click2Pay,e.next=5,r.init({srcDpaId:t,cardBrands:n||z,dpaTransactionOptions:{dpaLocale:"es_MX",consumerEmailAddressRequested:!0,consumerPhoneNumberRequested:!0,dpaAcceptedBillingCountries:[],dpaAcceptedShippingCountries:[],dpaShippingPreference:"NONE",dpaBillingPreference:"NONE",consumerNameRequested:!0},dpaData:{dpaPresentationName:"Billpocket",dpaName:"POCKET DE LATINOAMERICA S.A.P.I. de C.V."}});case 5:return e.abrupt("return",r.getCards());case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),validateOTPInput:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(t){var n,r,o,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:[],r=c.length>2&&void 0!==c[2]?c[2]:"",e.prev=2,o=new Click2Pay,e.next=6,o.init({srcDpaId:t,cardBrands:n||z,dpaTransactionOptions:{dpaLocale:"es_MX",consumerEmailAddressRequested:!0,consumerPhoneNumberRequested:!0,dpaAcceptedBillingCountries:[],dpaAcceptedShippingCountries:[],dpaBillingPreference:"FULL",customInputData:{"com.mastercard.dcfExperience":"WITHIN_CHECKOUT"},paymentOptions:[{dpaDynamicDataTtlMinutes:15,dynamicDataType:"CARD_APPLICATION_CRYPTOGRAM_SHORT_FORM"}]},dpaData:{dpaPresentationName:"Billpocket",dpaName:"POCKET DE LATINOAMERICA S.A.P.I. de C.V."}});case 6:return e.abrupt("return",o.validate({value:r}));case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()}},G={name:"MainCard",components:{VModalOfBanks:E,CheckoutDetails:R,VClickToPayOTP:M,Loading:J,ClickToPayBrands:H},mixins:[d.a,m.a,X],props:{orderId:{type:String,required:!0},serviceApi:{type:String,required:!0},excluded:{type:String,required:!0},envs:{type:Object,required:!0},checkout:{type:Object,required:!0},user:{type:Object,required:!0},plans:{type:Array,default:null},permissions:{type:Object,required:!0}},data:function(){return{subtotal:"",formPayment:null,selectedMonth:1,atLeastOneBlur:!1,availablePLans:[],canApply:!1,clientData:{name:"",lastname:"",card:null,period:null,cvv:null,payment_method:1,typeMonthlyPayment:"",email:"",phone:""},newCardForC2p:{card:"",period:"",cvv:""},cvvDigits:"####",placeholderDigits:"***",cardDigits:"#### - #### - #### - ####",placeholderCard:"xxxx - xxxx - xxxx - xxxx",cvvMessage:!1,showMSI:!1,redirectDialog:!1,redirectFlag:!1,htmlEntity:null,dialogForBanks:!1,currentIssuer:"",showCustomBanner:!1,makingApiCall:!1,rules:{required:!0,strings:!0,isValidCard:!0,isValidExpDate:!0,emailRules:!0,phoneRules:!0,cardholderEmail:[],cardholderPhone:[],isAmex:[],lastname:[],amexRule:!0},showPaymentForm:!0,paymentTypeSelected:"default",c2pCards:[],currentCardId:null,showOtpValidation:!1,otpConf:null,isLoading:!1,brands:["mastercard","visa","amex"],showConfirmation:!1,c2pInstance:null,showCheckboxToCreateAccount:!0,c2pUserSigned:!1,createC2pAccount:!1,cvvC2p:"",masterCardCheckout:{},click2PayError:"",requiredCode:!0,c2pInstanceError:null,addingNewCardForC2P:!1,plans2:[]}},computed:{isAmex:function(){return!(!this.clientData.card||!l.a.validate(this.clientData.card)||!this.clientData.card.startsWith("37")&&!this.clientData.card.startsWith("34"))},showAmexForm:function(){return this.clientData.card&&this.isAmex&&l.a.validate(this.clientData.card)},fixedValue:function(){return this.fixedDigits(this.total)},avoid3DSVerification:function(){if(!this.isPAD&&"disabled"===this.envs.status3dsForMerchants)return!0;if(!this.isPAD&&this.user.disabled3ds)return!0;if(this.isPAD&&"disabled"===this.envs.status3dsPAD)return!0;try{var e=this.excluded.split(",");if(null===this.clientData.card)return!1;var t=this.clientData.card.substring(0,6);return!!e.includes(t)}catch(e){return!1}},monthsList:function(){var e=this;return e.canApplyPaymentSchemas&&e.canApply?e.atLeastOneBlur?e.plans2.map(function(t){var n=e.getAmountWithCommas(t.amountPerMonth),data={text:"".concat(t.months," ").concat(t.months>1?"pagos mensuales":"pago "," de $").concat(n),month:t.months};return e.availablePLans.includes(t.months)?data.readonly=!e.canApply:(data.readonly=!0,1!==t.months&&(data.text+=" (No disponible para tu tarjeta, consulta tarjetas participantes)")),1===t.months&&(data.readonly=!1),data}):[{text:"Introduce primero tu tarjeta",month:1,readonly:!0}]:[{text:"1 pago de $".concat(this.checkout.total),month:1,readonly:!e.canApplyPaymentSchemas}]},canApplyPaymentSchemas:function(){return parseFloat(this.checkout.total)>=300},userIsUsingPlan:function(){return this.selectedMonth>1},floatMaxAmountAmex:function(){return parseFloat(this.envs.amexLimit)},floatMaxAmountInternationalCard:function(){return parseFloat(this.envs.LIMIT_FOR_INTERNATIONAL_CARDS)},amexAmountExceeded:function(){return!this.permissions.unlimitedAmexAndBBVA&&((this.isAmex||"BBVA"===this.currentIssuer)&&this.floatAmount>this.floatMaxAmountAmex)},fixedSubtotal:function(){return this.fixedDigits(this.subtotal)},descMensualidades:function(){return this.checkout.preselectedPaymentPlan?1==this.plans2.length&&1===this.plans2[0].months?"Mensualidades no disponibles para tu tarjeta":"":this.canApply?"Hasta 24 mensualidades":"Mensualidades no disponibles para tu tarjeta"},getMessageForInternationalCards:function(){return"Tarjetas emitidas fuera de México "+this.envs.LIMIT_MESSAGE.replace("{amount}",this.envs.LIMIT_FOR_INTERNATIONAL_CARDS)},getAmexMessageForExceededAmount:function(){return"American Express "+this.envs.amexMessage.replace("{amount}",this.floatMaxAmountAmex)},getBBVAMessageForExceededAmount:function(){return"BBVA "+this.envs.amexMessage.replace("{amount}",this.floatMaxAmountAmex)},getIssuerAmountExceeded:function(){return"AMEX"===this.currentIssuer?this.getAmexMessageForExceededAmount:"BBVA"===this.currentIssuer?this.getBBVAMessageForExceededAmount:"INTERNATIONAL"===this.currentIssuer?this.getMessageForInternationalCards:""},floatAmount:function(){return parseFloat(this.checkout.total)},internationalCardAmountExceeded:function(){return("INTERNATIONAL"!==this.currentIssuer||!this.permissions.unlimitedInternational)&&("INTERNATIONAL"===this.currentIssuer&&this.floatAmount>this.envs.LIMIT_FOR_INTERNATIONAL_CARDS)},color:function(){return this.user?this.user.colorEntity:""},isPAD:function(){return this.checkout.remote_payment},c2pBrands:function(){return this.envs.c2pBrands},c2pBrandsAsArray:function(){return this.envs.c2pBrands?this.envs.c2pBrands.split(","):[]},c2pBrandsForOTP:function(){return this.c2pBrandsAsArray.map(function(e){return"amex"===e?"american-express":e})},showC2PUI:function(){if(this.c2pInstanceError)return!1;var e=this.envs.usersListC2pPilot?this.envs.usersListC2pPilot.split(","):[];return!(!this.envs.statusPilotTestForC2P||!e.includes(this.user.userId.toString())&&!e.includes(this.checkout.real_user_id.toString()))||(!(!this.envs.enabledC2PForPAD||!this.checkout.remote_payment)||!(this.checkout.remote_payment||!this.envs.statusC2PForIntegrations))},getInformationCardForC2P:function(){var e=this;return this.c2pCards.find(function(t){return t.srcDigitalCardId===e.currentCardId})}},watch:{clientData:{deep:!0,handler:function(){this.clientData.card&&(this.clientData.card.startsWith("37")||this.clientData.card.startsWith("34"))?(this.cardDigits="#### - ###### - #####",this.placeholderDigits="****"):(this.cardDigits="#### - #### - #### - ####",this.placeholderDigits="***")}},paymentTypeSelected:{handler:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("default"===this.paymentTypeSelected&&(!this.c2pCards.length>0&&(this.showCheckboxToCreateAccount=!0),this.showPaymentForm=!0),"c2p"===this.paymentTypeSelected&&this.c2pUserSigned&&(this.showPaymentForm=!1),"c2p"!==this.paymentTypeSelected||this.c2pUserSigned){e.next=5;break}return e.next=5,this.verifyEmailOnC2PSystem();case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}},mounted:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n,r,o,c,l,d,m,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.lookingup=!1,this.isLoading=!0,t=this.user.userId.toString(),this.isPAD&&(t=this.checkout.real_user_id.toString()),(n=window._sift=window._sift||[]).push(["_setAccount",this.siftBeaconKey]),n.push(["_setUserId",t]),n.push(["_trackPageview"]),function(){function e(){var e=document.createElement("script");e.src="https://cdn.sift.com/s.js",document.body.appendChild(e)}window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1)}(),(r=document.createElement("script")).async=!0,r.defer=!0,r.setAttribute("src","https://www.google.com/recaptcha/api.js?render=".concat(this.envs.VUE_RECAPTCHA_KEY)),document.head.appendChild(r),this.isPAD&&(o=document.createElement("script"),c=document.createElement("noscript"),o.async=!0,c.async=!0,o.defer=!0,c.defer=!0,o.type="text/javascript",c.type="text/javascript",this.envs.addTagManager?(o.text="(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n    })(window,document,'script','dataLayer','GTM-PQLMWZD');",c.text='<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PQLMWZD"\n    height="0" width="0" style="display:none;visibility:hidden"></iframe>'):o.text="console.log('GTM must be added :D')",document.head.appendChild(o),document.body.appendChild(c)),!this.showC2PUI){e.next=33;break}return e.prev=16,window.c2pInstance=new Click2Pay,l=new Z,(d=l.getDefaultConf(this.checkout.total,this.c2pBrandsAsArray)).srcDpaId=this.envs.SRC_APP_ID,e.next=23,window.c2pInstance.init(d);case 23:return e.next=25,window.c2pInstance.getCards();case 25:(m=e.sent)&&m.length>0&&(this.c2pCards=m,this.currentCardId=m[0].srcDigitalCardId,this.setCardsAndListener(m),this.paymentTypeSelected="c2p",this.updateUIForClickToPay()),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(16),this.c2pInstanceError=e.t0;case 32:document.querySelector("#c2p-bg").addEventListener("click",function(e){h.showConfirmation=!1,h.removeViewForClickToPay(),h.makingApiCall=!1});case 33:this.isLoading=!1;case 34:case"end":return e.stop()}},e,this,[[16,29]])}));return function(){return e.apply(this,arguments)}}(),methods:{sendInformation:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.makingApiCall=!0,this.isPAD){e.next=4;break}return e.next=4,this.verifyChanges();case 4:return e.next=6,this.makeValidations();case 6:if("c2p"!==this.paymentTypeSelected||!this.addingNewCardForC2P||!this.$refs.clickToPayForm.validate()){e.next=11;break}return e.next=9,this.createClickToPayAccount("add");case 9:e.next=27;break;case 11:if("c2p"!==this.paymentTypeSelected||!this.currentCardId||!this.$refs.cvvFPAN.validate()){e.next=16;break}return e.next=14,this.startTransactionWithCard();case 14:e.next=27;break;case 16:if(!this.$refs.paywithForm.validate()){e.next=27;break}if(this.c2pUserSigned||!this.createC2pAccount){e.next=26;break}return e.next=20,this.userExistsOnSRCI();case 20:if(e.sent){e.next=24;break}return e.next=24,this.createClickToPayAccount();case 24:e.next=27;break;case 26:this.sendToPaywithService();case 27:this.makingApiCall=!1;case 28:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),sendToPaywithService:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.letsRedirect(),e.next=3,this.processCheckout();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),processTokenized:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n,o,data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.checkout.remote_payment?"pay":"checkout",e.prev=1,e.next=4,this.verifyRecaptcha();case 4:return n=e.sent,e.next=7,this.$axios.post("".concat(this.serviceApi,"/click2pay/").concat(this.orderId),Object(r.a)({},self.clientData,{recaptcha:n,mastercardCheckout:this.masterCardCheckout,paymentType:this.paymentTypeSelected,cvvC2p:this.cvvC2p}));case 7:o=e.sent,(data=o.data).success&&data.codeRequired?this.requiredCode=!0:data.success&&data.allowRedirect?window.location.href="/success/".concat(this.orderId):data.success&&data.htmlEntity?(this.htmlEntity=data.htmlEntity,setTimeout(function(){document.frmHtmlCheckout.submit()},500)):(this.cancelRedirect(),data.customPADMessage?this.$nuxt.error({message:data.customPADMessage.message,statusCode:data.customPADMessage.code,errorCode:data.customPADMessage.code,callbackUrl:"/".concat(t,"/").concat(this.orderId)}):this.$nuxt.error({message:data.message,statusCode:data.statusCode,errorCode:data.statusCode,callbackUrl:"/".concat(t,"/").concat(this.orderId)})),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),this.cancelRedirect(),500,this.$nuxt.error({message:"Ha surgido un error, por favor vuelve a intentarlo.",statusCode:500,errorCode:500,callbackUrl:"/".concat(t,"/").concat(this.orderId)});case 17:case"end":return e.stop()}},e,this,[[1,12]])}));return function(){return e.apply(this,arguments)}}(),processCheckout:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n,o,c,data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.checkout.remote_payment?"pay":"checkout",e.prev=1,n=this,e.next=5,n.verifyRecaptcha();case 5:return o=e.sent,e.next=8,this.$axios.post("".concat(this.serviceApi,"/txn/").concat(this.orderId),Object(r.a)({},n.clientData,{masterCardCheckout:this.masterCardCheckout,recaptcha:o,paymentType:this.paymentTypeSelected}));case 8:c=e.sent,(data=c.data).success&&data.htmlEntity&&""!==data.htmlEntity?(this.htmlEntity=data.htmlEntity,setTimeout(function(){document.frmHtmlCheckout.submit()},500)):data.success&&data.allowRedirect?window.location.href="/success/".concat(this.orderId):(this.cancelRedirect(),data.customPADMessage?this.$nuxt.error({message:data.customPADMessage.message,statusCode:data.customPADMessage.code,errorCode:data.customPADMessage.code,callbackUrl:"/".concat(t,"/").concat(this.orderId)}):this.$nuxt.error({message:data.message,statusCode:"",errorCode:"",callbackUrl:"/".concat(t,"/").concat(this.orderId)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),this.$nuxt.error({message:"Ha surgido un error, por favor vuelve a intentarlo.",statusCode:500,errorCode:500,callbackUrl:"/order/".concat(this.orderId)});case 16:this.makingApiCall=!1;case 17:case"end":return e.stop()}},e,this,[[1,13]])}));return function(){return e.apply(this,arguments)}}(),makeValidations:function(){this.rules={required:function(e){return!!e||"Campo Requerido."},strings:function(e){return/^[a-zA-ZÀ-ú ]+$/.test(e)||"Solo se permiten letras y tildes."},isValidCard:function(e){return l.a.validate(e)||"Debe introducir una tarjeta valida."},isValidExpDate:function(e){return function(e){if(!e)return"";if(e.length<4)return"";var t=(new Date).getFullYear(),n=(new Date).getMonth()+1,r=e.substring(0,2),o=e.substring(2,4);return"20".concat(o)==="".concat(t)&&r<n?"La tarjeta ya se encuentra vencida.":r>"12"||r<=0?"El mes de vencimiento es invalido.":"20".concat(o)<t&&"El año de vencimiento es invalido."}(e)},emailRules:[function(e){return!!e||"Correo es requerido."},function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"El correo debe ser válido."}],phoneRules:function(e){return!!e||"El teléfono es requerido"},isAmex:[function(e){return!!e||"Campo Requerido."}]},this.isAmex&&(this.rules.isAmex=[function(e){return!!e||"Campo Requerido."},function(e){return e?4===e.length||"El cvv debe ser de 4 dígitos.":""}]),(this.isPAD||this.isAmex)&&(this.rules.lastname=[function(e){return!!e||"Campo Requerido"}]),(this.isPAD||!this.isPAD&&!this.user.disabledSiftForm)&&(this.rules.cardholderEmail=[function(e){return!!e||"E-mail es requerido"},function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"El correo debe ser válido."}],this.rules.cardholderPhone=[function(e){return!!e||"El teléfono es requerido"}])},letsRedirect:function(){this.redirectDialog=!0,this.redirectFlag=!0},cancelRedirect:function(){this.redirectFlag=!1,this.redirectDialog=!1},verifyChanges:function(){if(!this.isPAD){var e=document.querySelector("#name").value,t=document.querySelector("#card").value,n=document.querySelector("#period").value,r=document.querySelector("#cvv").value;""===this.clientData.name&&""!==e&&(this.clientData.name=e),null===this.clientData.card&&""!==t&&(this.clientData.card=t),null===this.clientData.period&&""!==n&&(this.clientData.period=n),null===this.clientData.cvv&&""!==r&&(this.clientData.cvv=r);var o=document.querySelector("#useremail").value,c=document.querySelector("#userphone").value;""===this.clientData.email&&""!==o&&(this.clientData.email=o),""===this.clientData.phone&&""!==c&&(this.clientData.phone=c)}},showBanks:function(){this.dialogForBanks=!0},handlerCloseModal:function(){this.dialogForBanks=!1,this.showC2PCardList=!1,this.showOtpValidation=!1},changeOtp:function(e){this.otpConf.maskedValidationChannel=e.maskedValidationChannel,this.initiateValidation(e.validationChannelId)},onChange:function(){var e=this;if(this.clientData.payment_method=this.selectedMonth,1!==this.selectedMonth){var t=this.plans2.find(function(t){return t.months===e.selectedMonth});t&&(this.clientData.typeMonthlyPayment=t.type,this.subtotal=t.realAmount)}else this.clientData.typeMonthlyPayment=""},onBlur:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n,data,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,this.atLeastOneBlur=!0,""!==t.clientData.card){e.next=8;break}this.selectedMonth=1,this.canApply=!1,this.clientData.payment_method=1,e.next=28;break;case 8:if(!(""!==t.clientData.card&&t.canApplyPaymentSchemas&&l.a.validate(this.clientData.card)||"c2p"===this.paymentTypeSelected)){e.next=28;break}return t.clientData.payment_method=1,t.showMSI=!0,t.canApply=!1,this.currentIssuer="",e.prev=13,e.next=16,this.$axios.post("".concat(this.serviceApi,"/bin/validate"),{card:this.clientData.card});case 16:n=e.sent,(data=n.data).validated&&(this.canApply=!0),this.plans2=[],this.checkout.preselectedPaymentPlan?(r=this.plans.length>1&&data.plans.includes(this.plans[1].months),this.plans2.push(this.plans[this.canApply&&r?1:0]),t.selectedMonth=this.plans2[0].months,t.onChange()):(this.plans2=this.plans,t.selectedMonth={text:"".concat(this.plans2[0].months," ").concat(this.plans2[0].months>1?"Pagos":"Pago"," de\n                            ").concat(this.plans2[0].amountPerMonth),month:this.plans2[0].months,readonly:!1}),data.plans&&data.plans.length>0&&(t.availablePLans=data.plans),data.canUseDigitalWallet&&(this.showCustomBanner=data.canUseDigitalWallet.canUseDigitalWallet),this.isAmex?this.currentIssuer="AMEX":data.canUseDigitalWallet&&"BANCOMER"===data.canUseDigitalWallet.issuer?this.currentIssuer="BBVA":data.isInternationalCard&&(this.currentIssuer="INTERNATIONAL"),e.next=28;break;case 26:e.prev=26,e.t0=e.catch(13);case 28:case"end":return e.stop()}},e,this,[[13,26]])}));return function(){return e.apply(this,arguments)}}(),onBlurForEmail:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.lookingup||this.c2pUserSigned){e.next=5;break}return window.lookingup=!0,e.next=4,this.verifyEmailOnC2PSystem();case 4:window.lookingup=!1;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getAmountWithCommas:function(e){return this.fixedDigits(e)},verifyRecaptcha:function(){var e=this;return new Promise(function(t){grecaptcha.ready(function(){grecaptcha.execute(e.envs.VUE_RECAPTCHA_KEY,{action:"ecommerce"}).then(function(e){t(e)})})})},startTransactionWithCard:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.showConfirmation=!0,t=this.getAWindowForClickToPay(),e.prev=2,e.next=5,window.c2pInstance.checkoutWithCard({srcDigitalCardId:this.currentCardId,windowRef:t.contentWindow});case 5:if(n=e.sent,this.masterCardCheckout=n,"COMPLETE"!==n.checkoutActionCode){e.next=10;break}return e.next=10,this.processTokenized();case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),this.showDefaultErrorForClick2Pay(),this.removeViewForClickToPay();case 16:this.showConfirmation=!1;case 17:case"end":return e.stop()}},e,this,[[2,12]])}));return function(){return e.apply(this,arguments)}}(),addCardToCurrentUser:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),userExistsOnSRCI:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.c2pInstance.idLookup({email:this.clientData.email});case 3:return t=e.sent,e.abrupt("return",t.consumerPresent);case 7:e.prev=7,e.t0=e.catch(0),this.showDefaultErrorForClick2Pay();case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),verifyEmailOnC2PSystem:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.clientData.email){e.next=14;break}return e.prev=1,e.next=4,this.userExistsOnSRCI();case 4:if(!e.sent){e.next=9;break}return e.next=8,this.initiateValidation();case 8:return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 12:e.prev=12,e.t0=e.catch(1);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,this,[[1,12]])}));return function(){return e.apply(this,arguments)}}(),createClickToPayAccount:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n,r,o,c,l,d=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:"new",this.showConfirmation=!0,n={primaryAccountNumber:this.clientData.card,panExpirationMonth:this.clientData.period.substring(0,2),panExpirationYear:this.clientData.period.substring(2,4),cardSecurityCode:this.clientData.cvv,cardholderFirstName:this.clientData.name,cardholderLastName:this.clientData.lastname},"add"===t&&(n={primaryAccountNumber:this.newCardForC2p.card,panExpirationMonth:this.newCardForC2p.period.substring(0,2),panExpirationYear:this.newCardForC2p.period.substring(2,4),cardSecurityCode:this.newCardForC2p.cvv}),e.prev=4,e.next=7,window.c2pInstance.encryptCard(n);case 7:return r=e.sent,o=this.getAWindowForClickToPay(),c={encryptedCard:r.encryptedCard,cardBrand:r.cardBrand,consumer:{firstName:this.clientData.name,lastName:this.clientData.lastname,emailAddress:this.clientData.email,mobileNumber:{countryCode:"52",phoneNumber:this.clientData.phone}},windowRef:o.contentWindow},"add"===t&&delete c.consumer,e.next=13,window.c2pInstance.checkoutWithNewCard(c);case 13:if("COMPLETE"!==(l=e.sent).checkoutActionCode){e.next=24;break}return this.masterCardCheckout=l,this.cvvC2p=this.clientData.cvv,this.removeViewForClickToPay(),this.showConfirmation=!1,"add"===t?(delete c.consumer,this.cvvC2p=this.newCardForC2p.cvv):this.cvvC2p=this.clientData.cvv,e.next=22,this.processTokenized();case 22:e.next=26;break;case 24:this.removeViewForClickToPay(),this.showConfirmation=!1;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(4),this.removeViewForClickToPay(),this.showDefaultErrorForClick2Pay();case 32:case"end":return e.stop()}},e,this,[[4,28]])}));return function(){return e.apply(this,arguments)}}(),handlerOptValue:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{this.c2pCards=t,this.setCardsAndListener(t),this.updateUIForClickToPay(),this.paymentTypeSelected="c2p"}catch(e){this.showDefaultErrorForClick2Pay()}case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateUIForClickToPay:function(){this.c2pCards.length>0&&(this.c2pUserSigned=!0,this.showPaymentForm=!1,this.showCheckboxToCreateAccount=!1,this.clientData.card=this.c2pCards[0].panBin,this.onBlur())},initiateValidation:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:null,e.prev=1,n=null,!t){e.next=9;break}return e.next=6,window.c2pInstance.initiateValidation({requestedValidationChannelId:t});case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,window.c2pInstance.initiateValidation();case 11:n=e.sent;case 12:this.otpConf=n,this.showOtpValidation=!0,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}},e,this,[[1,16]])}));return function(){return e.apply(this,arguments)}}(),showDefaultErrorForClick2Pay:function(){var e=this;this.click2PayError="Ha surgido un error, por favor vuelve a intentarlo",setTimeout(function(){e.click2PayError=""},3e3)},getAWindowForClickToPay:function(){var e=document.querySelector("#divToInsertIframe"),t=document.createElement("iframe");return t.setAttribute("id","paymentWindow"),t.setAttribute("style","height:100%;width:100%;"),e.appendChild(t),t},removeViewForClickToPay:function(){try{document.querySelector("#paymentWindow").remove()}catch(e){}},setCardsAndListener:function(e){var t=this,n=this;setTimeout(function(){document.querySelector("#srcCardList").loadCards(e),document.querySelector("src-card-list").addEventListener("selectSrcDigitalCardId",function(e){n.currentCardId=e.detail,n.clientData.card=n.getInformationCardForC2P.panBin,n.onBlur()}),document.querySelector("src-card-list").addEventListener("clickAddCardLink",function(e){t.addingNewCardForC2P=!0})},100)}}},K=(n(337),n(386)),Q=n(227),ee=n(275),te=n(376),ae=n(250),ne=n(377),re=n(384),se=Object(v.a)(G,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VFlex",{attrs:{"mt-4":""}},[r("VLayout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[r("VFlex",{attrs:{xl10:"",md11:"",sm12:""}},[r("div",{domProps:{innerHTML:e._s(e.htmlEntity)}}),e._v(" "),r("VCard",[r("div",{staticClass:"pa-2",style:"background-color: "+e.color}),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","justify-center":"","pa-4":"","mt-2":""}},[r("VFlex",{attrs:{md4:"",sm12:"","px-2":""}},[r("CheckoutDetails",{attrs:{color:e.user.colorEntity,checkout:e.checkout}})],1),e._v(" "),r("VFlex",{attrs:{md8:"",sm12:"","px-3":""}},[r("p",{staticClass:"title text-xs-center text-md-left"},[e._v("\n              Método de pago\n            ")]),e._v(" "),r("VLayout",[r("VFlex",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentTypeSelected,expression:"paymentTypeSelected"}],attrs:{type:"radio",value:"default",name:"paymentoption"},domProps:{checked:e._q(e.paymentTypeSelected,"default")},on:{change:function(t){e.paymentTypeSelected="default"}}}),e._v(" Tarjeta de débito o crédito\n                "),e.showC2PUI?r("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentTypeSelected,expression:"paymentTypeSelected"}],staticClass:"ml-3",attrs:{type:"radio",value:"c2p",name:"paymentoption"},domProps:{checked:e._q(e.paymentTypeSelected,"c2p")},on:{change:function(t){e.paymentTypeSelected="c2p"}}}):e._e(),e._v(" "),e.showC2PUI?r("ClickToPayBrands",{staticClass:"ml-2",attrs:{brands:e.brands}}):e._e()],1)],1),e._v(" "),r("VDivider",{staticClass:"mt-3"}),e._v(" "),e.showC2PUI?r("VLayout",{directives:[{name:"show",rawName:"v-show",value:"c2p"===e.paymentTypeSelected,expression:"paymentTypeSelected==='c2p'"}],attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("no-ssr",[r("div",{},[e.showC2PUI?r("src-card-list",{directives:[{name:"show",rawName:"v-show",value:e.c2pCards.length>0&&!e.addingNewCardForC2P,expression:"c2pCards.length > 0 && !addingNewCardForC2P"}],staticClass:"card-box",attrs:{id:"srcCardList",locale:"es_MX","card-brands":e.c2pBrands,"display-cancel-option":"false","display-add-card":"true","card-selection-type":"radioButton","src-digital-card-id":"","display-header":"false"}}):e._e()],1)]),e._v(" "),e.addingNewCardForC2P?r("div",[r("VForm",{ref:"clickToPayForm"},[r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                          Número de tarjeta\n                        ")]),e._v(" "),r("VTextField",{attrs:{id:"cardc2p",name:"cardc2p",autocomplete:"cc-number",placeholder:e.placeholderCard,"prepend-inner-icon":"credit_card",mask:e.cardDigits,color:e.color,rules:[e.rules.required,e.rules.isValidCard]},model:{value:e.newCardForC2p.card,callback:function(t){e.$set(e.newCardForC2p,"card","string"==typeof t?t.trim():t)},expression:"newCardForC2p.card"}}),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.amexAmountExceeded||e.internationalCardAmountExceeded,expression:"amexAmountExceeded || internationalCardAmountExceeded"}],staticClass:"red--text"},[e._v("\n                          "+e._s(e.getIssuerAmountExceeded)+"\n                        ")]),e._v(" "),r("VAlert",{attrs:{value:e.showCustomBanner,color:"blue",icon:"info",outline:""}},[e._v("\n                          Garantiza mayor aprobación y seguridad pagando con tu Tarjeta Digital de la App BBVA.\n                        ")])],1)],1),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                          Vigencia\n                        ")]),e._v(" "),r("VTextField",{attrs:{id:"periodc2p",name:"periodc2p",autocomplete:"cc-exp",placeholder:"MM/YY",color:e.color,mask:"##/##",rules:[e.rules.required,e.rules.isValidExpDate]},model:{value:e.newCardForC2p.period,callback:function(t){e.$set(e.newCardForC2p,"period","string"==typeof t?t.trim():t)},expression:"newCardForC2p.period"}})],1),e._v(" "),r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                          Código CVV\n                        ")]),e._v(" "),r("VTextField",{attrs:{id:"cvvc2p",type:"password",name:"cvvc2p",autocomplete:"cc-csc",placeholder:e.placeholderDigits,color:e.color,mask:e.cvvDigits,"append-outer-icon":"help",rules:e.rules.isAmex},on:{"click:append-outer":function(t){e.cvvMessage=!e.cvvMessage}},model:{value:e.newCardForC2p.cvv,callback:function(t){e.$set(e.newCardForC2p,"cvv","string"==typeof t?t.trim():t)},expression:"newCardForC2p.cvv"}})],1)],1),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("a",{on:{click:function(t){e.addingNewCardForC2P=!1}}},[e._v("Volver a listado de mis tarjetas.")])])],1)],1)],1):e._e(),e._v(" "),e.requiredCode&&"c2p"===e.paymentTypeSelected&&e.c2pCards.length>0&&!e.addingNewCardForC2P?r("VFlex",{attrs:{"px-1":""}},[r("VForm",{ref:"cvvFPAN"},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Código CVV\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"cvvC2p",type:"password",name:"cvv",autocomplete:"cc-csc",placeholder:e.placeholderDigits,color:e.color,mask:e.cvvDigits,"append-outer-icon":"help",rules:[function(e){return!!e||"Campo Requerido."}]},on:{"click:append-outer":function(t){e.cvvMessage=!e.cvvMessage},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.processTokenized(t)}},model:{value:e.cvvC2p,callback:function(t){e.cvvC2p="string"==typeof t?t.trim():t},expression:"cvvC2p"}})],1),e._v(" "),r("span",{staticClass:"red--text"},[e._v("Por seguridad ingresa tu CVV")])],1):e._e()],1)],1):e._e(),e._v(" "),r("VForm",{ref:"paywithForm",staticClass:"my-5",on:{submit:function(t){return t.preventDefault(),e.sendInformation(t)}}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showPaymentForm,expression:"showPaymentForm"}]},[r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      E-mail\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"useremail",name:"useremail",autocomplete:"email",placeholder:"E-mail","prepend-inner-icon":"email",color:e.color,rules:e.rules.cardholderEmail},on:{blur:e.onBlurForEmail},model:{value:e.clientData.email,callback:function(t){e.$set(e.clientData,"email","string"==typeof t?t.trim():t)},expression:"clientData.email"}})],1),e._v(" "),r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Teléfono\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"userphone",name:"userphone",placeholder:"Teléfono","prepend-inner-icon":"phone",mask:"##########",color:e.color,rules:e.rules.cardholderPhone},model:{value:e.clientData.phone,callback:function(t){e.$set(e.clientData,"phone","string"==typeof t?t.trim():t)},expression:"clientData.phone"}})],1)],1),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Nombre(s)\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"name",name:"name",autocomplete:"cc-name",placeholder:"Nombre(s)","prepend-inner-icon":"person",color:e.color,rules:[e.rules.required,e.rules.strings]},model:{value:e.clientData.name,callback:function(t){e.$set(e.clientData,"name","string"==typeof t?t.trim():t)},expression:"clientData.name"}})],1),e._v(" "),r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Apellidos\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"lastname",name:"lastname",placeholder:"Apellidos","prepend-inner-icon":"person",rules:e.rules.lastname,color:e.color},model:{value:e.clientData.lastname,callback:function(t){e.$set(e.clientData,"lastname","string"==typeof t?t.trim():t)},expression:"clientData.lastname"}})],1)],1),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Número de tarjeta\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"card",name:"card",autocomplete:"cc-number",placeholder:e.placeholderCard,"prepend-inner-icon":"credit_card",mask:e.cardDigits,color:e.color,rules:[e.rules.required,e.rules.isValidCard]},on:{blur:e.onBlur},model:{value:e.clientData.card,callback:function(t){e.$set(e.clientData,"card","string"==typeof t?t.trim():t)},expression:"clientData.card"}}),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.amexAmountExceeded||e.internationalCardAmountExceeded,expression:"amexAmountExceeded || internationalCardAmountExceeded"}],staticClass:"red--text"},[e._v("\n                      "+e._s(e.getIssuerAmountExceeded)+"\n                    ")]),e._v(" "),r("VAlert",{attrs:{value:e.showCustomBanner,color:"blue",icon:"info",outline:""}},[e._v("\n                      Garantiza mayor aprobación y seguridad pagando con tu Tarjeta Digital de la App BBVA.\n                    ")])],1)],1),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Vigencia\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"period",name:"period",autocomplete:"cc-exp",placeholder:"MM/YY",color:e.color,mask:"##/##",rules:[e.rules.required,e.rules.isValidExpDate]},model:{value:e.clientData.period,callback:function(t){e.$set(e.clientData,"period","string"==typeof t?t.trim():t)},expression:"clientData.period"}})],1),e._v(" "),r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Código CVV\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"cvv",type:"password",name:"cvv",autocomplete:"cc-csc",placeholder:e.placeholderDigits,color:e.color,mask:e.cvvDigits,"append-outer-icon":"help",rules:e.rules.isAmex},on:{"click:append-outer":function(t){e.cvvMessage=!e.cvvMessage},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.letsRedirect(t)}},model:{value:e.clientData.cvv,callback:function(t){e.$set(e.clientData,"cvv","string"==typeof t?t.trim():t)},expression:"clientData.cvv"}})],1)],1)],1),e._v(" "),e.cvvMessage?r("div",[r("VLayout",{attrs:{"align-center":"","justify-center":"",row:"",wrap:"","px-3":""}},[r("VFlex",{staticClass:"text-xs-center text-sm-left",attrs:{xs12:"",sm3:""}},[r("img",{attrs:{src:n(260),alt:"credit_card",height:"45"}})]),e._v(" "),r("VFlex",{staticClass:"text-xs-center text-sm-left",attrs:{sm9:""}},[r("p",{staticClass:"subheading blue-grey--text"},[e._v("\n                      Es el código de 3 o 4 dígitos ubicado al reverso de la tarjeta.\n                    ")])])],1)],1):e._e(),e._v(" "),e.showCheckboxToCreateAccount&&e.showC2PUI?r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.createC2pAccount,expression:"createC2pAccount"}],attrs:{id:"checkedc2p",type:"checkbox",name:"checkedc2p"},domProps:{checked:Array.isArray(e.createC2pAccount)?e._i(e.createC2pAccount,null)>-1:e.createC2pAccount},on:{change:function(t){var n=e.createC2pAccount,r=t.target,o=!!r.checked;if(Array.isArray(n)){var c=e._i(n,null);r.checked?c<0&&(e.createC2pAccount=n.concat([null])):c>-1&&(e.createC2pAccount=n.slice(0,c).concat(n.slice(c+1)))}else e.createC2pAccount=o}}}),e._v(" "),r("img",{staticClass:"ml-1 c2p-img-create-account",attrs:{src:n(241),alt:"clicktopay"}}),e._v("\n                  Crear cuenta en Click To Pay\n                ")])],1):e._e(),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                    Planes de pago\n                  ")]),e._v(" "),r("p",{staticClass:"grey--text mb-0"},[e._v("\n                    "+e._s(e.descMensualidades)+"\n                    "),r("span",{staticClass:"blue--text showBanks",attrs:{href:"#"},on:{click:e.showBanks}},[e._v("\n                      Ver tarjetas participantes\n                    ")])]),e._v(" "),r("VSelect",{attrs:{id:"selectPlans",items:e.monthsList,dense:!0,"item-text":"text","item-value":"month","item-disabled":"readonly"},on:{change:e.onChange},model:{value:e.selectedMonth,callback:function(t){e.selectedMonth=t},expression:"selectedMonth"}}),e._v(" "),e.userIsUsingPlan?r("p",{staticClass:"grey--text mt-0"},[e._v("\n                    Monto total a pagar: $"+e._s(e.fixedSubtotal)+"\n                  ")]):e._e()],1)],1),e._v(" "),e.isAmex?r("div",[r("p",{staticClass:"help-amex"},[e._v("\n                  American Express solicita los siguientes datos para proteger tu compra.\n                ")]),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Correo\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"email",name:"correo",autocomplete:"email",color:e.color,rules:e.rules.cardholderEmail},model:{value:e.clientData.email,callback:function(t){e.$set(e.clientData,"email","string"==typeof t?t.trim():t)},expression:"clientData.email"}})],1),e._v(" "),r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Teléfono\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"phone",name:"phone",color:e.color,mask:"##########",rules:[e.rules.phoneRules]},model:{value:e.clientData.phone,callback:function(t){e.$set(e.clientData,"phone","string"==typeof t?t.trim():t)},expression:"clientData.phone"}})],1)],1),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Código Postal\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"zipcode",name:"zipcode",mask:"#####",autocomplete:"zipcode",color:e.color,rules:[e.rules.required]},model:{value:e.clientData.zipcode,callback:function(t){e.$set(e.clientData,"zipcode","string"==typeof t?t.trim():t)},expression:"clientData.zipcode"}})],1),e._v(" "),r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Colonia\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"neighborhood",name:"neighborhood",color:e.color,rules:[e.rules.required]},model:{value:e.clientData.neighborhood,callback:function(t){e.$set(e.clientData,"neighborhood","string"==typeof t?t.trim():t)},expression:"clientData.neighborhood"}})],1)],1),e._v(" "),r("VLayout",{attrs:{row:"",wrap:"","my-3":""}},[r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Calle\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"street",name:"street",color:e.color,rules:[e.rules.required]},model:{value:e.clientData.street,callback:function(t){e.$set(e.clientData,"street","string"==typeof t?t.trim():t)},expression:"clientData.street"}})],1),e._v(" "),r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Numero Exterior\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"address_1",name:"address_1",color:e.color,rules:[e.rules.required]},model:{value:e.clientData.address_1,callback:function(t){e.$set(e.clientData,"address_1","string"==typeof t?t.trim():t)},expression:"clientData.address_1"}})],1),e._v(" "),r("VFlex",{attrs:{"px-1":""}},[r("p",{staticClass:"subheading my-0 font-weight-medium"},[e._v("\n                      Numero Interior\n                    ")]),e._v(" "),r("VTextField",{attrs:{id:"address_2",name:"address_2",color:e.color},model:{value:e.clientData.address_2,callback:function(t){e.$set(e.clientData,"address_2","string"==typeof t?t.trim():t)},expression:"clientData.address_2"}})],1)],1)],1):e._e(),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.click2PayError,expression:"click2PayError"}],staticClass:"red--text"},[e._v("\n                "+e._s(e.click2PayError)+"\n              ")]),e._v(" "),r("VBtn",{staticClass:"white--text",attrs:{type:"submit",block:"",color:"blue-grey darken-3",loading:e.redirectDialog,disabled:e.amexAmountExceeded||e.internationalCardAmountExceeded||e.makingApiCall}},[e._v("\n                Realizar pago\n              ")])],1)],1)],1)],1)],1)],1),e._v(" "),r("VDialog",{attrs:{persistent:"",transition:"dialog-transition","max-width":"400px"},model:{value:e.redirectDialog,callback:function(t){e.redirectDialog=t},expression:"redirectDialog"}},[r("VCard",[r("VCardText",[r("VLayout",{attrs:{"align-center":"","justify-center":"",column:"","fill-height":""}},[r("p",{staticClass:"subheading text-xs-center blue-grey--text darken-2"},[e._v("\n            En 5 segundos, será redirigido para validar los datos de su tarjeta.\n          ")]),e._v(" "),r("VProgressLinear",{staticClass:"my-4",attrs:{indeterminate:!0,color:e.color}}),e._v(" "),r("VBtn",{attrs:{block:"",color:"blue-grey darken-3",dark:"",outline:""},nativeOn:{click:function(t){return e.cancelRedirect(t)}}},[e._v("\n            Cancelar\n          ")])],1)],1)],1)],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmation,expression:"showConfirmation"}]},[r("div",{staticClass:"payment-window-bg",attrs:{id:"c2p-bg"}}),e._v(" "),r("div",{staticClass:"payment-window payment-active",attrs:{id:"divToInsertIframe"}})]),e._v(" "),r("VModalOfBanks",{attrs:{"is-open":e.dialogForBanks},on:{closeModal:e.handlerCloseModal}}),e._v(" "),e.showOtpValidation?r("VClickToPayOTP",{attrs:{"is-open":e.showOtpValidation,"otp-conf":e.otpConf,brands:e.c2pBrandsForOTP},on:{closeModal:e.handlerCloseModal,changeOtp:e.changeOtp,otpValue:e.handlerOptValue}}):e._e(),e._v(" "),r("Loading",{attrs:{"is-loading":e.isLoading}})],1)},[],!1,null,"1767f112",null);t.a=se.exports;C()(se,{VAlert:K.a,VBtn:Q.a,VCard:y.a,VCardText:x.a,VDialog:k.a,VDivider:ee.a,VFlex:A.a,VForm:te.a,VLayout:D.a,VProgressLinear:ae.a,VSelect:ne.a,VTextField:re.a})},258:function(e,t,n){"use strict";var r={name:"BPRemotePaymentHeader",data:function(){return{logoLoaded:!1}}},o=n(22),c=n(38),l=n.n(c),d=n(224),m=n(225),component=Object(o.a)(r,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VFlex",{attrs:{"my-3":""}},[r("VLayout",{attrs:{"align-start":"","justify-center":"",row:"","fill-height":""}},[r("VFlex",{staticClass:"text-xs-center"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.logoLoaded,expression:"logoLoaded"}]},[r("img",{staticClass:"mb-2",attrs:{src:n(371),height:"120"},on:{load:function(t){e.logoLoaded=!0}}})])])],1)],1)},[],!1,null,null,null);t.a=component.exports;l()(component,{VFlex:d.a,VLayout:m.a})},260:function(e,t,n){e.exports=n.p+"img/8c642c2.svg"},274:function(e,t,n){e.exports=n.p+"img/6a13d54.svg"},287:function(e,t,n){e.exports=n.p+"img/038205d.png"},288:function(e,t,n){e.exports=n.p+"img/0094967.png"},289:function(e,t,n){e.exports=n.p+"img/c9f50f7.png"},290:function(e,t,n){e.exports=n.p+"img/c887b53.png"},291:function(e,t,n){e.exports=n.p+"img/71cf9af.png"},292:function(e,t,n){e.exports=n.p+"img/0eb2ab2.png"},293:function(e,t,n){e.exports=n.p+"img/76ae820.png"},294:function(e,t,n){e.exports=n.p+"img/8e9708c.png"},295:function(e,t,n){e.exports=n.p+"img/ed2b186.png"},296:function(e,t,n){e.exports=n.p+"img/4b0f7aa.png"},297:function(e,t,n){e.exports=n.p+"img/9d6e1d8.png"},298:function(e,t,n){e.exports=n.p+"img/bb63385.png"},299:function(e,t,n){e.exports=n.p+"img/2df2f06.png"},300:function(e,t,n){e.exports=n.p+"img/3e5997a.png"},301:function(e,t,n){e.exports=n.p+"img/4c4422f.png"},302:function(e,t,n){e.exports=n.p+"img/8be71ff.png"},303:function(e,t,n){e.exports=n.p+"img/1db8d24.png"},304:function(e,t,n){e.exports=n.p+"img/3165212.png"},305:function(e,t,n){e.exports=n.p+"img/e15142e.png"},306:function(e,t,n){"use strict";var r=n(242);n.n(r).a},307:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,"@media screen and (max-width:600px){img[data-v-6f90fd5d]{height:30px}.modalTitle[data-v-6f90fd5d]{font-size:1em}.subtitleModal[data-v-6f90fd5d]{font-size:.8em}}",""])},318:function(e,t,n){"use strict";var r=n(247);n.n(r).a},319:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".items-container-scroll{max-height:40vh;overflow-y:auto;border:.1em dashed #ced1cf;border-radius:.3em}",""])},329:function(e,t,n){var map={"./amex.svg":330,"./billy_error.svg":331,"./billy_not_found.svg":145,"./billy_success.svg":248,"./bp-logo.svg":332,"./clicktopay.svg":241,"./credit-cardCVV.svg":260,"./mastercard.svg":333,"./mc_sc.svg":146,"./pipe.svg":274,"./verified_visa.svg":147,"./visa.svg":334};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=329},330:function(e,t,n){e.exports=n.p+"img/48f0aa9.svg"},331:function(e,t,n){e.exports=n.p+"img/c4a3f77.svg"},332:function(e,t,n){e.exports=n.p+"img/782d52c.svg"},333:function(e,t,n){e.exports=n.p+"img/a4c6bc1.svg"},334:function(e,t,n){e.exports=n.p+"img/7f32411.svg"},337:function(e,t,n){"use strict";var r=n(249);n.n(r).a},338:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".items-container-scroll[data-v-1767f112]{max-height:40vh;overflow-y:auto;border:.1em dashed #ced1cf;border-radius:.3em}.payment-window-bg[data-v-1767f112]{width:100%;opacity:.5;background-color:#000;right:0}.payment-window[data-v-1767f112],.payment-window-bg[data-v-1767f112]{height:100%;position:fixed;top:0;z-index:100}.payment-window[data-v-1767f112]{min-width:400px;right:-400px;background:#fff;transition:right .5s ease-in-out}.payment-active[data-v-1767f112]{right:0}#paymentWindow[data-v-1767f112]{width:100%;height:100%}iframe[data-v-1767f112]{display:block;vertical-align:middle}#checkedc2p[data-v-1767f112]{width:15px;height:15px}.card-box[data-v-1767f112]{overflow-y:scroll!important;max-height:300px}.c2p-img-create-account[data-v-1767f112]{height:17px!important}",""])},371:function(e,t,n){e.exports=n.p+"img/acc855d.png"}}]);